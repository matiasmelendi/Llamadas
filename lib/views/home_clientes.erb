<!DOCTYPE html>
<html>
    <head>
        <title> Clientes </title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
        <script rel="JQuery" src="http://code.jquery.com/jquery-1.11.0.min.js"></script>

        <script language="JavaScript" type="text/javascript" >

            function refrescarClientes() {
                if ($.readyState==4) {
                    if ($.responseText.indexOf('invalid') == -1) {
                        $('#clientes').html($.responseText)
                    } else {
                        $('#clientes').innerHTML = 'Error'
                    }
                }
            }

            $(document).ready(function () {
                        $('#buscar').click(function () {
                            var nombre= $('#nombre').html();
                            window.location.replace('/buscar_cliente/?nombre=' + nombre);
                        });

                        $('#borrar').click(function () {
                            var nombre= $('#nombre').html();
                            $.post('/borrar_cliente/?nombre=' + nombre);
                            $('#clientes').html();
                        });

                        $('#formCrear').submit(function () {
                            $('#clientes').html();
                        });

            });
            //window.setInterval('refrescarClientes()',1000);
        </script>


    </head>

    <body class="container">

        <div class="panel panel-success"></div>

            <h1 align="center"> Sección clientes </h1>

            <!--panel izquierdo-->
            <div>
                <div class="panel panel-success">
                    <div class="panel-heading">Buscar cliente</div>
                    <div class="panel-body">
                        <form action="/buscar_cliente/" method="get">
                            <input type="text" name="nombre" placeholder="Ingrese un nombre" required/>
                            <input type="submit" class="btn btn-success" value="Buscar cliente" />
                        </form>
                    </div>
                </div>
            </div>

            <div >
                <div class="panel panel-success">
                <div class="panel-heading"> Todos los clientes </div>
                      <ul id="clientes">
                            <% @clientes.each { |cliente|  %>
                            <li>
                              <div class="btn-group btn-group">
                                <div class="btn-group pull-left ">
                                  <button id="buscar" class="btn btn-default">
                                    <a id="nombre"><%=cliente.nombre %></a>
                                  </button>
                                </div>
                                <div class="btn-group ">
                                  <button id="borrar" class="btn btn-default pull-right" >
                                    <div class="glyphicon glyphicon-remove" ></div>
                                  </button>
                                </div>
                              </div>
                            </li>
                            <% } %>
                      </ul>

                    </div>
                </div>
            </div>


            <!--panel derecho-->
            <div>
                <div class="panel panel-success">
                    <div class="panel-heading">Borrar un cliente</div>
                    <div class="panel-body"  >
                        <form action="/borrar_cliente/" method="post">
                            <input type="text" name="nombre" placeholder="Ingrese un nombre" required/>
                            <input id="borrar" type="submit" class="btn btn-success" value="Borrar cliente" />
                        </form>
                    </div>
                </div>
            </div>


            <!--panel centro-->
            <div >
                <div class="panel panel-success ">
                    <div class="panel-heading ">Crear cliente</div>
                    <div class="panel-body ">
                        <form id="formCrear" action="/seccion_clientes/crear_cliente/" method="post">
                            Nombre:         <input type="text" class="form-control" name="nombre" placeholder="Ingrese un nombre" required >
                            Cod local:      <input type="number" class="form-control" min="0" name="cod_local" placeholder="Ingrese un código de area local"  required/>
                            Cod nacional:   <input type="number" class="form-control" min="0" name="cod_nacional" placeholder="Ingrese un código de area nacional" required />
                            Número:         <input type="tel" maxlength="10" class="form-control" name="nro" placeholder="Ingrese un número telefónico" required/>
                            <button type="submit" class="btn btn-success">Crear cliente</button>
                        </form>
                    </div>
                </div>
            </div>


        </div>

    </body>

</html>