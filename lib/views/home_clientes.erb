<!DOCTYPE html>
<html >
<head>
    <title> Clientes </title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <script rel="JQuery" src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/angular.min.js"></script>

      <script>
          $.borrarCliente= function (nombre){
              $.ajax('POST', '/borrar_cliente/?nombre=', true,
                      function () {
                          $.clientes=<%= @clientes.reject { |c| c.nombre.eql?( nombre ) } %>

                      });
              $.send(nombre);

          };

          $.buscarCliente= function (nombre){

              $.open('GET','/buscar_cliente/?nombre=', true);
              $.send(nombre);
          };

      </script>
</head>

    <body>
        <div class="panel panel-success">

            <h1 align="center"> Sección clientes </h1>

            <!--panel izquierdo-->
            <div class="container ">
                <div class="panel panel-success">
                    <div class="panel-heading">Buscar cliente</div>
                    <div class="panel-body">
                        <form action="/buscar_cliente/" method="get">
                            <input type="text" name="nombre" placeholder="Ingrese un nombre" required/>
                            <input type="submit" class="btn btn-success" onclick="$.borrarCliente(nombre)" value="Buscar cliente" />
                        </form>
                    </div>
                </div>
            </div>

            <div class="container">
                <div class="panel panel-success">
                <div class="panel-heading"> Todos los clientes </div>

                    <div class="panel-body" >
                      <ul >
                            <li ng-repeat="cliente $.clientes">
                              <div class="btn-group btn-group">
                                <div class="btn-group ">
                                  <button type="button" class="btn btn-default" onclick="$.buscarCliente(cliente.nombre)">{{cliente.nombre}}</button>
                                </div>
                                <div class="btn-group ">
                                  <button type="button" class="btn btn-default pull-right" onclick="$.borrarCliente(cliente.nombre)">
                                    <div class="glyphicon glyphicon-remove" />
                                  </button>
                                </div>
                              </div>
                            </li>
                      </ul>
                    </div>
                </div>
            </div>


            <!--panel derecho-->
            <div class="container">
                <div class="panel panel-success">
                    <div class="panel-heading">Borrar un cliente</div>
                    <div class="panel-body" id="ajax" >
                        <form class="in-line" action="/borrar_cliente/" method="post">
                            <input type="text" name="nombre" placeholder="Ingrese un nombre" required/>
                            <input type="submit" class="btn btn-success" value="Borrar cliente" />
                        </form>
                    </div>
                </div>
            </div>


            <!--panel centro-->
            <div class="container">
                <div class="panel panel-success ">
                    <div class="panel-heading ">Crear cliente</div>
                    <div class="panel-body ">
                        <form action="/crear_cliente/" method="post">
                            Nombre:         <input type="text" class="form-control" name="nombre" placeholder="Ingrese un nombre" required >
                            Cod local:      <input type="number" class="form-control" min="0" name="cod_local" placeholder="Ingrese un código de area local"  required/>
                            Cod nacional:   <input type="number" class="form-control" min="0" name="cod_nacional" placeholder="Ingrese un código de area nacional" required />
                            Número:         <input type="tel" maxlength="10" class="form-control" name="nro" placeholder="Ingrese un número telefónico" required/>
                            <button type="submit" class="btn btn-success">Crear cliente</button>
                        </form>
                    </div>
                </div>
            </div>


        </div>

    </body>

</html>